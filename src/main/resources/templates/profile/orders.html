<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/main-layout :: html(content=~{::main})}">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</title>
</head>
<body>
<main>

    <div class="profile-container">
        <div class="profile-layout">
            <!-- –ë–æ–∫–æ–≤–æ–µ –º–µ–Ω—é -->
            <div class="sidebar">
                <div class="user-info">
                    <div class="user-avatar">üë§</div>
                    <div class="user-name" th:text="${user.firstName + ' ' + user.lastName}">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
                    <div class="user-email" th:text="${user.email}">ivan@mail.com</div>
                </div>
                <hr>
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="/profile" class="nav-link" th:classappend="${pageTitle == '–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç' ? 'active' : ''}">
                            üìã –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/profile/orders" class="nav-link active">
                            üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/profile/edit" class="nav-link">
                            ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                        </a>
                    </li>
                </ul>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="content">
                <h2>–ú–æ–∏ –∑–∞–∫–∞–∑—ã</h2>

                <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
                <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
                <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>

                <!-- –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ -->
                <div th:if="${not #lists.isEmpty(orders)}">
                    <div th:each="order : ${orders}" class="order-card">
                        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–∫–∞–∑–∞ -->
                        <div class="order-header">
                            <div>
                                <span class="order-id">–ó–∞–∫–∞–∑ #[[${order.id}]]</span>
                                <span class="order-date" th:text="${#temporals.format(order.createdAt, 'dd.MM.yyyy HH:mm')}">
                                    14.02.2026 15:30
                                </span>
                            </div>
                            <!-- –°—Ç–∞—Ç—É—Å -->
                            <span th:if="${order.status.name() == 'PENDING'}" class="badge badge-warning">‚è≥ –û–∂–∏–¥–∞–µ—Ç</span>
                            <span th:if="${order.status.name() == 'CONFIRMED'}" class="badge badge-info">‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω</span>
                            <span th:if="${order.status.name() == 'PREPARING'}" class="badge badge-primary">üë®‚Äçüç≥ –ì–æ—Ç–æ–≤–∏—Ç—Å—è</span>
                            <span th:if="${order.status.name() == 'READY_FOR_DELIVERY'}" class="badge badge-secondary">üì¶ –ì–æ—Ç–æ–≤</span>
                            <span th:if="${order.status.name() == 'ON_THE_WAY'}" class="badge badge-dark">üöö –í –ø—É—Ç–∏</span>
                            <span th:if="${order.status.name() == 'DELIVERED'}" class="badge badge-success">üèÅ –î–æ—Å—Ç–∞–≤–ª–µ–Ω</span>
                            <span th:if="${order.status.name() == 'COMPLETED'}" class="badge badge-secondary">‚ú® –ó–∞–≤–µ—Ä—à–µ–Ω</span>
                            <span th:if="${order.status.name() == 'CANCELLED'}" class="badge badge-danger">‚ùå –û—Ç–º–µ–Ω–µ–Ω</span>
                        </div>

                        <!-- –¢–µ–ª–æ –∑–∞–∫–∞–∑–∞ -->
                        <div class="order-body">
                            <div class="order-info">
                                <div>
                                    <div class="info-label">–°—É–º–º–∞</div>
                                    <div class="info-value" th:text="${order.totalPrice != null ? #numbers.formatDecimal(order.totalPrice, 0, 0) : 0} + ' ‚ÇΩ'">
                                        1250 ‚ÇΩ
                                    </div>
                                </div>
                                <div>
                                    <div class="info-label">–¢–æ–≤–∞—Ä–æ–≤</div>
                                    <div class="info-value" th:text="${order.items.size()} + ' —à—Ç'">3 —à—Ç</div>
                                </div>
                                <div>
                                    <div class="info-label">–î–æ—Å—Ç–∞–≤–∫–∞</div>
                                    <div class="info-value" th:text="${order.deliveryType.name() == 'DELIVERY' ? '–î–æ—Å—Ç–∞–≤–∫–∞' : '–°–∞–º–æ–≤—ã–≤–æ–∑'}">
                                        –î–æ—Å—Ç–∞–≤–∫–∞
                                    </div>
                                </div>
                            </div>

                        </div>

                        <!-- –ö–Ω–æ–ø–∫–∏ -->
                        <div class="order-footer">
                            <a th:href="@{/profile/orders/{id}(id=${order.id})}" class="btn btn-outline">
                                üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                            </a>
                            <form th:action="@{/profile/orders/{id}/repeat(id=${order.id})}" method="post" style="display: inline;">
                                <button type="submit" class="btn btn-primary">
                                    üîÑ –ü–æ–≤—Ç–æ—Ä–∏—Ç—å
                                </button>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- –ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ -->
                <div th:if="${#lists.isEmpty(orders)}" class="empty-state">
                    <div class="empty-icon">üì¶</div>
                    <h3 style="margin-bottom: 10px;">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–∫–∞–∑–æ–≤</h3>
                    <p style="color: #666; margin-bottom: 20px;">–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –º–µ–Ω—é –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å –≤–∫—É—Å–Ω–æ–µ!</p>
                    <a href="/menu" class="btn btn-primary" style="display: inline-block;">–ü–µ—Ä–µ–π—Ç–∏ –≤ –º–µ–Ω—é</a>
                </div>
            </div>
        </div>
    </div>

</main>
</body>
</html>
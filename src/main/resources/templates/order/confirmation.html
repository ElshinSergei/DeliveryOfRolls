<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout/main-layout :: html(content=~{::main})}">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω</title>
</head>
<body>
<main>
    <div class="container py-5">
        <!-- –£—Å–ø–µ—à–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="text-center mb-5">
            <div class="success-animation">
                <i class="bi bi-check-circle-fill text-success" style="font-size: 5rem;"></i>
            </div>
            <h1 class="display-4 mt-4">–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–∫–∞–∑!</h1>
            <p class="lead text-muted">–í–∞—à –∑–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω –∏ –ø–µ—Ä–µ–¥–∞–Ω –≤ –æ–±—Ä–∞–±–æ—Ç–∫—É</p>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ -->
        <div class="row justify-content-center" th:if="${order}">
            <div class="col-md-8">
                <div class="card shadow-sm">
                    <div class="card-header bg-success text-white">
                        <h4 class="mb-0">
                            <i class="bi bi-receipt"></i>
                            –ó–∞–∫–∞–∑ #[[${order.id}]]
                        </h4>
                    </div>

                    <div class="card-body">
                        <!-- –°—Ç–∞—Ç—É—Å –∑–∞–∫–∞–∑–∞ -->
                        <div class="row mb-4">
                            <div class="col">
                                <span class="badge bg-warning text-dark p-3 w-100"
                                      th:if="${order.status == 'PENDING'}">
                                    <i class="bi bi-clock-history"></i>
                                    –°—Ç–∞—Ç—É—Å: –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
                                </span>
                                <span class="badge bg-success p-3 w-100"
                                      th:if="${order.status == 'CONFIRMED'}">
                                    <i class="bi bi-check-circle"></i>
                                    –°—Ç–∞—Ç—É—Å: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω
                                </span>
                            </div>
                        </div>

                        <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5><i class="bi bi-person"></i> –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h5>
                                <hr class="mt-1">
                            </div>
                            <div class="col-md-6">
                                <p class="mb-1"><strong>–ò–º—è:</strong>
                                    <span th:text="${order.customerName}">–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</span>
                                </p>
                                <p class="mb-1"><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong>
                                    <span th:text="${order.customerPhone}">+7 (999) 123-45-67</span>
                                </p>
                            </div>
                            <div class="col-md-6">
                                <p class="mb-1"><strong>–°–ø–æ—Å–æ–± –ø–æ–ª—É—á–µ–Ω–∏—è:</strong>
                                    <span th:text="${order.deliveryType == 'DELIVERY' ? '–î–æ—Å—Ç–∞–≤–∫–∞' : '–°–∞–º–æ–≤—ã–≤–æ–∑'}"></span>
                                </p>
                                <p th:if="${order.deliveryAddress}" class="mb-1">
                                    <strong>–ê–¥—Ä–µ—Å:</strong>
                                    <span th:text="${order.deliveryAddress}">—É–ª. –ü—É—à–∫–∏–Ω–∞, –¥. 10, –∫–≤. 5</span>
                                </p>
                            </div>
                        </div>

                        <!-- –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏ -->
                        <div class="row mb-4" th:if="${order.deliveryTime}">
                            <div class="col-12">
                                <h5><i class="bi bi-clock"></i> –í—Ä–µ–º—è –¥–æ—Å—Ç–∞–≤–∫–∏</h5>
                                <hr class="mt-1">
                                <p th:text="${#temporals.format(order.deliveryTime, 'dd MMMM yyyy, HH:mm')}">
                                    12 —Ñ–µ–≤—Ä–∞–ª—è 2026, 18:30
                                </p>
                            </div>
                        </div>

                        <!-- –°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞ -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5><i class="bi bi-basket"></i> –°–æ—Å—Ç–∞–≤ –∑–∞–∫–∞–∑–∞</h5>
                                <hr class="mt-1">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead class="table-light">
                                        <tr>
                                            <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                            <th class="text-center">–ö–æ–ª-–≤–æ</th>
                                            <th class="text-end">–¶–µ–Ω–∞</th>
                                            <th class="text-end">–°—É–º–º–∞</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr th:each="item : ${order.items}">
                                            <td>
                                                <span th:text="${item.dishName}">–§–∏–ª–∞–¥–µ–ª—å—Ñ–∏—è</span>
                                                <small th:if="${item.specialInstructions}"
                                                       class="d-block text-muted"
                                                       th:text="${'üìù ' + item.specialInstructions}">
                                                    –ë–µ–∑ —Å–æ—É—Å–∞
                                                </small>
                                            </td>
                                            <td class="text-center" th:text="${item.quantity}">2</td>
                                            <td class="text-end"
                                                th:text="${#numbers.formatDecimal(item.priceAtOrder, 0, 0)} + ' ‚ÇΩ'">
                                                350 ‚ÇΩ
                                            </td>
                                            <td class="text-end fw-bold"
                                                th:text="${#numbers.formatDecimal(item.totalPrice, 0, 0)} + ' ‚ÇΩ'">
                                                700 ‚ÇΩ
                                            </td>
                                        </tr>
                                        </tbody>
                                        <tfoot class="table-light">
                                        <tr>
                                            <td colspan="3" class="text-end fw-bold">–ò—Ç–æ–≥–æ:</td>
                                            <td class="text-end fw-bold text-success fs-5"
                                                th:text="${#numbers.formatDecimal(order.totalPrice, 0, 0)} + ' ‚ÇΩ'">
                                                700 ‚ÇΩ
                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>

                        <!-- –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã -->
                        <div class="row mb-4">
                            <div class="col-12">
                                <h5><i class="bi bi-credit-card"></i> –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</h5>
                                <hr class="mt-1">
                                <p>
                                    <span th:if="${order.paymentMethod == 'CASH'}">
                                        <i class="bi bi-cash"></i> –ù–∞–ª–∏—á–Ω—ã–º–∏ –∫—É—Ä—å–µ—Ä—É
                                    </span>
                                    <span th:if="${order.paymentMethod == 'CARD_ON_DELIVERY'}">
                                        <i class="bi bi-credit-card"></i> –ö–∞—Ä—Ç–æ–π –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏
                                    </span>
                                    <span th:if="${order.paymentMethod == 'CARD_ONLINE'}">
                                        <i class="bi bi-wifi"></i> –ö–∞—Ä—Ç–æ–π –æ–Ω–ª–∞–π–Ω
                                    </span>
                                </p>
                            </div>
                        </div>

                        <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –∑–∞–∫–∞–∑—É -->
                        <div class="row mb-4" th:if="${order.notes}">
                            <div class="col-12">
                                <h5><i class="bi bi-chat"></i> –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</h5>
                                <hr class="mt-1">
                                <p class="fst-italic text-muted"
                                   th:text="${order.notes}">
                                    –ü–æ–∑–≤–æ–Ω–∏—Ç—å –∑–∞ 10 –º–∏–Ω—É—Ç, –¥–æ–º–æ—Ñ–æ–Ω 123
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="card-footer bg-white">
                        <div class="row">
                            <div class="col-12 text-center">
                                <p class="text-muted mb-3">
                                    –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.
                                </p>
                                <div class="d-flex justify-content-center gap-3">
                                    <a th:href="@{/menu}" class="btn btn-outline-primary btn-lg">
                                        <i class="bi bi-menu-button-wide"></i> –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é
                                    </a>
                                    <a th:href="@{/order/history}"
                                       class="btn btn-outline-secondary btn-lg"
                                       th:if="${order.user != null}">
                                        <i class="bi bi-clock-history"></i> –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</main>
</body>
</html>